<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Pentest Web - 02 - Scan de ports - Nyxott&#39;s blog</title><meta name="Description" content="Scanner les ports d&#39;un serveur"><meta property="og:title" content="Pentest Web - 02 - Scan de ports" />
<meta property="og:description" content="Scanner les ports d&#39;un serveur" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nyxott.github.io/posts/pentest-web-02-scan-ports/" />
<meta property="og:image" content="https://nyxott.github.io/posts/pentest-web-02-scan-ports/featured-image.png"/>
<meta property="article:published_time" content="2021-03-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-03-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://nyxott.github.io/posts/pentest-web-02-scan-ports/featured-image.png"/>
<meta name="twitter:title" content="Pentest Web - 02 - Scan de ports"/>
<meta name="twitter:description" content="Scanner les ports d&#39;un serveur"/>
<meta name="application-name" content="Nyxott&#39;s blog">
<meta name="apple-mobile-web-app-title" content="Nyxott&#39;s blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://nyxott.github.io/posts/pentest-web-02-scan-ports/" /><link rel="prev" href="https://nyxott.github.io/posts/pentest-web-01-environnement-entrainement/" /><link rel="next" href="https://nyxott.github.io/posts/pentest-web-03-tls-configuration/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Pentest Web - 02 - Scan de ports",
        "inLanguage": "fr",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/nyxott.github.io\/posts\/pentest-web-02-scan-ports\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/nyxott.github.io\/posts\/pentest-web-02-scan-ports\/featured-image.png",
                            "width":  1004 ,
                            "height":  497 
                        }],"genre": "posts","keywords": "Pentest Web","wordcount":  643 ,
        "url": "https:\/\/nyxott.github.io\/posts\/pentest-web-02-scan-ports\/","datePublished": "2021-03-01T00:00:00+00:00","dateModified": "2021-03-01T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "Nyxott"},"author": {
                "@type": "Person",
                "name": "Nyxott"
            },"description": "Scanner les ports d'un serveur"
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Nyxott&#39;s blog"><span class="header-title-pre"><i class='fas fa-dollar-sign'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"><i class='fas fa-file-alt'></i>  Posts </a><a class="menu-item" href="/categories/"><i class='fa fa-folder-open'></i>  Categories </a><a class="menu-item" href="/about/"><i class='fas fa-address-card'></i>  A Propos </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Nyxott&#39;s blog"><span class="header-title-pre"><i class='fas fa-dollar-sign'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title=""><i class='fas fa-file-alt'></i> Posts</a><a class="menu-item" href="/categories/" title=""><i class='fa fa-folder-open'></i> Categories</a><a class="menu-item" href="/about/" title=""><i class='fas fa-address-card'></i> A Propos</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Pentest Web - 02 - Scan de ports</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>Nyxott</a></span>&nbsp;<span class="post-category">included in <a href="/categories/pentest-web/"><i class="far fa-folder fa-fw"></i>Pentest Web</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="01-03-2021">01-03-2021</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;643 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/pentest-web-02-scan-ports/featured-image.png"
        data-srcset="/posts/pentest-web-02-scan-ports/featured-image.png, /posts/pentest-web-02-scan-ports/featured-image.png 1.5x, /posts/pentest-web-02-scan-ports/featured-image.png 2x"
        data-sizes="auto"
        alt="/posts/pentest-web-02-scan-ports/featured-image.png"
        title="Scanner les ports d&#39;un serveur" /></div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#découvertes-des-ports">Découvertes des ports</a>
      <ul>
        <li><a href="#tcp">TCP</a></li>
        <li><a href="#udp">UDP</a></li>
      </ul>
    </li>
    <li><a href="#analyse-des-résultats">Analyse des résultats</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>Cet article explique comment scanner les ports d&rsquo;un serveur.</p>
<h2 id="introduction">Introduction</h2>
<p>La première action à réaliser durant un pentest Web est la découverte de ports.</p>
<p>Cela permet de connaître les services proposés par la cible.</p>
<p>Afin de réaliser cette tâche, il est recommandé d&rsquo;utiliser <a href="https://nmap.org" target="_blank" rel="noopener noreffer">Nmap</a> qui est un scanner de ports libre créé par Fyodor et distribué par Insecure.org. Il est conçu pour détecter les ports ouverts, identifier les services hébergés et obtenir des informations sur le système d&rsquo;exploitation d&rsquo;un ordinateur distant.</p>
<p>Nmap propose une machine dédiée au scan. Il est donc possible de scanner le domaine <a href="http://scanme.nmap.org/" target="_blank" rel="noopener noreffer">scanme.nmap.org</a> à des fins de tests.</p>
<h2 id="découvertes-des-ports">Découvertes des ports</h2>
<h3 id="tcp">TCP</h3>
<p>Les services utilisant le protocole TCP sont les plus courants.</p>
<p>L&rsquo;ensemble des ports du serveur cible peut être scanné en TCP via la commande suivante :</p>
<pre><code>sudo nmap -sSVC &lt;IP&gt; -p- --version-intensity 9
</code></pre><p>Cette commande regroupe de nombreuses vérifications :</p>
<ul>
<li><code>-sS</code> : Rapide et discret, le scan SYN ne termine jamais les connexions TCP et permet une différenciation fiable entre les états &ldquo;ouvert&rdquo;, &ldquo;fermé&rdquo; et &ldquo;filtré&rdquo;.</li>
<li><code>-sV</code> : Si un port ouvert est découvert, des vérifications supplémentaires seront effectuées afin de découvrir, si possible, la version exacte du service proposé par ce port.</li>
<li><code>-sC</code> : Des scripts seront automatiquement lancés en fonction de divers paramètres afin de récupérer des informations supplémentaires sur l&rsquo;hôte ou sur les ports ouverts.</li>
<li><code>-p-</code> : L&rsquo;ensemble des 65535 ports du serveur seront testés</li>
<li><code>--version-intensity 9</code> : La totalité des tests de détections de version seront effectués. Cela rends les tests plus long mais plus fiable</li>
</ul>
<p><figure><a class="lightgallery" href="/posts/pentest-web-02-scan-ports/scan-all-tcp-ports.png" title="Exemple de scan de ports TCP" data-thumbnail="/posts/pentest-web-02-scan-ports/scan-all-tcp-ports.png" data-sub-html="<h2>Exemple de scan de ports TCP</h2><p>Exemple de scan de ports TCP</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="scan-all-tcp-ports.png"
            data-srcset="/posts/pentest-web-02-scan-ports/scan-all-tcp-ports.png, scan-all-tcp-ports.png 1.5x, /posts/pentest-web-02-scan-ports/scan-all-tcp-ports.png 2x"
            data-sizes="auto"
            alt="/posts/pentest-web-02-scan-ports/scan-all-tcp-ports.png" />
    </a><figcaption class="image-caption">Exemple de scan de ports TCP</figcaption>
    </figure></p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Note<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Moins d&rsquo;une dizaine de minutes est nécessaire pour que le scan se termine.</div>
        </div>
    </div>
<h3 id="udp">UDP</h3>
<p>Les services utilisant le protocole UDP sont plus rarement exposés, mais il est important de tout de même les scanner.</p>
<p>Le scan UDP peut s&rsquo;avérer extrêmement lent car, contrairement au TCP, il n&rsquo;y a pas de notion de connexions. De ce fait, si un port est fermé, il faut envoyer plusieurs paquets et attendre un message indiquant explicitement que le port n&rsquo;est pas accessible.</p>
<p>Compte tenu de cela, le scan de ports UDP ne sera pas utilisé pour vérifier la totalité des 65535 ports.</p>
<p>Une partie des ports du serveur cible peut être scannée en UDP via la commande suivante :</p>
<pre><code>sudo nmap -sUV &lt;IP&gt; -T 4 --top-ports 15094 --version-intensity 0
</code></pre><p>Quelques paramètres divergent du scan TCP :</p>
<ul>
<li><code>-sU</code> : Effectue un scan UDP</li>
<li><code>-T 4</code> : Effectue un scan de type &ldquo;agressif&rdquo; qui accélère quelque peu le scan</li>
<li><code>--top-ports 15 094</code> : Scan les 15 094 ports les plus communs</li>
<li><code>--version-intensity 0</code> : Seuls les tests de détections de version les plus courants seront effectués ce qui rend les tests excessivement moins longs</li>
</ul>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Note<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>15 094 peut paraître un peu tatillon, mais c&rsquo;est la valeur recommandée dans la documentation officielle de Nmap afin de couvrir 99% des cas.</p>
<p>De cette manière nous sommes sur à 99% d&rsquo;avoir découvert tous les ports UDP potentiellement ouverts en économisant le temps de scan de 50 441 ports.</p>
</div>
        </div>
    </div>
<p><figure><a class="lightgallery" href="/posts/pentest-web-02-scan-ports/scan-udp-ports-1.png" title="Exemple de scan de ports UDP rapide" data-thumbnail="/posts/pentest-web-02-scan-ports/scan-udp-ports-1.png" data-sub-html="<h2>Exemple de scan de ports UDP rapide</h2><p>Exemple de scan de ports UDP rapide</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="scan-udp-ports-1.png"
            data-srcset="/posts/pentest-web-02-scan-ports/scan-udp-ports-1.png, scan-udp-ports-1.png 1.5x, /posts/pentest-web-02-scan-ports/scan-udp-ports-1.png 2x"
            data-sizes="auto"
            alt="/posts/pentest-web-02-scan-ports/scan-udp-ports-1.png" />
    </a><figcaption class="image-caption">Exemple de scan de ports UDP rapide</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="/posts/pentest-web-02-scan-ports/scan-udp-ports-2.png" title="Exemple de scan de ports UDP long" data-thumbnail="/posts/pentest-web-02-scan-ports/scan-udp-ports-2.png" data-sub-html="<h2>Exemple de scan de ports UDP long</h2><p>Exemple de scan de ports UDP long</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="scan-udp-ports-2.png"
            data-srcset="/posts/pentest-web-02-scan-ports/scan-udp-ports-2.png, scan-udp-ports-2.png 1.5x, /posts/pentest-web-02-scan-ports/scan-udp-ports-2.png 2x"
            data-sizes="auto"
            alt="/posts/pentest-web-02-scan-ports/scan-udp-ports-2.png" />
    </a><figcaption class="image-caption">Exemple de scan de ports UDP long</figcaption>
    </figure></p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>Note<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>Environ une minute de scan est nécessaire pour que le scan avec l&rsquo;option <code>--version-intensity 0</code> se termine, tandis qu&rsquo;il faut plus d&rsquo;une heure pour celui avec l&rsquo;option <code>--version-intensity 1</code>.</p>
<p>Il est alors évident qu&rsquo;un scan avec l&rsquo;option <code>--version-intensity 9</code> va prendre des dizaines d&rsquo;heures et n&rsquo;est donc pas envisageable.</p>
</div>
        </div>
    </div>
<h2 id="analyse-des-résultats">Analyse des résultats</h2>
<p>Dans le cas d&rsquo;un serveur Web seul les ports 80 et 443 en TCP sont légitimes.</p>
<p>Tous les autres ports en TCP ainsi que l&rsquo;ensemble des ports UDP ne sont pas censés être ouverts.</p></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 01-03-2021</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://nyxott.github.io/posts/pentest-web-02-scan-ports/" data-title="Pentest Web - 02 - Scan de ports" data-hashtags="Pentest Web"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://nyxott.github.io/posts/pentest-web-02-scan-ports/" data-hashtag="Pentest Web"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://nyxott.github.io/posts/pentest-web-02-scan-ports/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://nyxott.github.io/posts/pentest-web-02-scan-ports/" data-title="Pentest Web - 02 - Scan de ports"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://nyxott.github.io/posts/pentest-web-02-scan-ports/"><i class="fab fa-reddit fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/pentest-web/">Pentest Web</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/pentest-web-01-environnement-entrainement/" class="prev" rel="prev" title="Pentest Web - 01 - Environnement d&#39;entraînement"><i class="fas fa-angle-left fa-fw"></i>Pentest Web - 01 - Environnement d&#39;entraînement</a>
            <a href="/posts/pentest-web-03-tls-configuration/" class="next" rel="next" title="Pentest Web - 03 - SSL/TLS Configuration">Pentest Web - 03 - SSL/TLS Configuration<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2020 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Nyxott</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/typeit/typeit.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"data":{"id-1":"Nyxott's blog","id-2":"Nyxott's blog"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
